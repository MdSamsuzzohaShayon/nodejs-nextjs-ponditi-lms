(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[300],{8786:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/login",function(){return c(7789)}])},2319:function(a,b,c){"use strict";var d=c(5893),e=c(9473);b.Z=function(){var a=(0,e.v9)(function(a){return a.elements.errorList}),b=(0,e.v9)(function(a){return a.elements.successMessageList});return a.length>0?(0,d.jsx)("div",{className:"alert alert-danger",children:(0,d.jsx)("ul",{children:a.map(function(a,b){return(0,d.jsxs)("li",{className:"list-unstyled",children:[(0,d.jsx)("img",{src:"/icons/exclamination.svg",alt:"",width:"25px"})," ",a]},b)})})}):b.length>0?(0,d.jsx)("div",{className:"alert alert-success",children:(0,d.jsx)("ul",{children:b.map(function(a,b){return(0,d.jsxs)("li",{className:"list-unstyled",children:[(0,d.jsx)("img",{src:"/icons/tick.svg",alt:"",width:"25px"})," ",a]},b)})})}):null}},7789:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return t}});var d=c(5893),e=c(7294),f=c(9473),g=c(1163),h=c(1964),i=c(7568),j=c(4924),k=c(6042),l=c(4051),m=c.n(l),n=c(8987),o=c(8525),p=c(4884),q=c(7916),r=c(2319),s=function(){var a,b=(0,g.useRouter)(),c=(0,f.I0)(),e=(0,f.v9)(function(a){return a.admin.loginAdmin}),h=(a=(0,i.Z)(m().mark(function a(d){var f,g,h,i,j,l,n;return m().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(d.preventDefault(),""!==e.emailorpass){a.next=3;break}return a.abrupt("return",c((0,o.ri)(["You must use email or phone number to login"])));case 3:if(!(e.password.length<6)){a.next=5;break}return a.abrupt("return",c((0,o.ri)(["Password must be more than or equal 6 charecter long"])));case 5:if(f=(0,k.Z)({},e),g=/\d+/,!(f.emailorpass.includes("@")&&f.emailorpass.includes("."))){a.next=11;break}f.email=f.emailorpass,delete f.emailorpass,delete f.phone,a.next=16;break;case 11:if(!g.test(f.emailorpass)){a.next=15;break}f.phone=f.emailorpass,delete f.email,delete f.emailorpass,a.next=16;break;case 15:return a.abrupt("return",c((0,o.ri)(["Put a valid phone number or email"])));case 16:return a.prev=16,c((0,o.o4)(!0)),a.next=20,q.Z.post("/admin/login",f,{headers:{"Content-Type":"application/json"}});case 20:200===(h=a.sent).status&&(c((0,o.hb)()),window.localStorage.setItem("user",JSON.stringify(h.data.user)),c((0,p.JE)(!0)),b.push("/admin")),a.next=34;break;case 24:if(a.prev=24,a.t0=a.catch(16),console.log(a.t0),(null===a.t0|| void 0===a.t0?void 0:null===(i=a.t0.response)|| void 0===i?void 0:null===(j=i.data)|| void 0===j?void 0:j.msg)&&c((0,o.ri)([a.t0.response.data.msg])),!((null===a.t0|| void 0===a.t0?void 0:null===(l=a.t0.response)|| void 0===l?void 0:l.status)===401||(null===a.t0|| void 0===a.t0?void 0:null===(n=a.t0.response)|| void 0===n?void 0:n.status)===405)){a.next=33;break}return window.localStorage.removeItem("user"),a.next=33,q.Z.post("/user/logout");case 33:c((0,o.o4)(!1));case 34:return a.abrupt("return",null);case 35:case"end":return a.stop()}},a,null,[[16,24]])})),function(b){return a.apply(this,arguments)}),l=function(a){c((0,n.$6)((0,j.Z)({},a.target.name,a.target.value)))};return(0,d.jsxs)("div",{className:"Login",children:[(0,d.jsx)("div",{className:"row mx-0 mb-3",children:(0,d.jsx)("h1",{children:"Login as Admin"})}),(0,d.jsx)(r.Z,{}),(0,d.jsxs)("form",{onSubmit:h,children:[(0,d.jsx)("div",{className:"row mb-3 mx-0",children:(0,d.jsxs)("div",{className:"col",children:[(0,d.jsx)("label",{htmlFor:"emailorpass",children:"Email or Phone"}),(0,d.jsx)("input",{type:"text",className:"form-control",name:"emailorpass",id:"emailorpass",defaultValue:e.emailorpass,onChange:l})]})}),(0,d.jsx)("div",{className:"row mb-3 mx-0",children:(0,d.jsxs)("div",{className:"col",children:[(0,d.jsx)("label",{htmlFor:"password",children:"Password"}),(0,d.jsx)("input",{type:"password",className:"form-control",name:"password",id:"password",defaultValue:e.password,onChange:l})]})}),(0,d.jsx)("div",{className:"row mb-3 mx-0",children:(0,d.jsx)("div",{className:"col",children:(0,d.jsx)("button",{type:"submit",className:"btn btn-primary w-fit",children:"Login"})})})]})]})};c(5789);var t=function(){var a=(0,g.useRouter)(),b=(0,f.I0)(),c=!1;return(0,e.useEffect)(function(){!1===c&&(b((0,o.o4)(!0)),null===localStorage.getItem("user")?b((0,p.JE)(!1)):(b((0,p.JE)(!0)),a.push("/admin")),b((0,o.o4)(!1))),c=!0},[]),(0,d.jsx)(h.Z,{children:(0,d.jsx)("section",{className:"section-1 Admin-login",children:(0,d.jsx)("div",{className:"container",children:(0,d.jsxs)("div",{className:"row mt-5",children:[(0,d.jsx)("div",{className:"lockicon col-md-6 d-none d-md-block",children:(0,d.jsx)("img",{src:"/shape/login.svg",alt:"",className:"img-fluid"})}),(0,d.jsx)("div",{className:"login-component col-md-6",children:(0,d.jsx)(s,{})})]})})})})}}},function(a){a.O(0,[997,206,774,888,179],function(){var b;return a(a.s=8786)}),_N_E=a.O()}])