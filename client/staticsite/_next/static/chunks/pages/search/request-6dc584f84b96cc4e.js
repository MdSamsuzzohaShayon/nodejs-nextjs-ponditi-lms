(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[513],{2356:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search/request",function(){return c(9475)}])},2319:function(a,b,c){"use strict";var d=c(5893),e=c(9473);b.Z=function(){var a=(0,e.v9)(function(a){return a.elements.errorList}),b=(0,e.v9)(function(a){return a.elements.successMessageList});return a.length>0?(0,d.jsx)("div",{className:"alert alert-danger",children:(0,d.jsx)("ul",{children:a.map(function(a,b){return(0,d.jsxs)("li",{className:"list-unstyled",children:[(0,d.jsx)("img",{src:"/icons/exclamination.svg",alt:"",width:"25px"})," ",a]},b)})})}):b.length>0?(0,d.jsx)("div",{className:"alert alert-success",children:(0,d.jsx)("ul",{children:b.map(function(a,b){return(0,d.jsxs)("li",{className:"list-unstyled",children:[(0,d.jsx)("img",{src:"/icons/tick.svg",alt:"",width:"25px"})," ",a]},b)})})}):null}},9475:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return K}});var d=c(7568),e=c(4051),f=c.n(e),g=c(5893),h=c(7294),i=c(1163),j=c.n(i),k=c(9473),l=c(4884),m=c(4924),n=c(6042),o=c(7054),p=c(1673),q=c(8525),r=c(7916),s=c(375),t=c(5789),u=c(6089),v=c.n(u),w=[{id:1,day:"Saturday"},{id:2,day:"Sunday"},{id:3,day:"Monday"},{id:4,day:"Tuesday"},{id:5,day:"Wednesday"},{id:6,day:"Thursday"},{id:7,day:"Friday"},],x=[{id:1,short:"jan",name:"January"},{id:2,short:"fab",name:"Fabruary"},{id:3,short:"mar",name:"March"},{id:4,short:"apr",name:"April"},{id:5,short:"may",name:"May"},{id:6,short:"jun",name:"June"},{id:7,short:"jul",name:"July"},{id:8,short:"aug",name:"August"},{id:9,short:"sep",name:"September"},{id:10,short:"oct",name:"October"},{id:11,short:"nov",name:"November"},{id:12,short:"dec",name:"December"},],y=function(a,b,c,d,e,f){for(var g=b(x.find(function(b){return b.id===a}).short,c),h=[],i=d-1,j=0;j<f;j+=1)e[i]&&h.push(e[i].day),0===i?i=e.length-1:i-=1;for(var k=h.reverse(),l=[],m=d-1,n=0;n<g;n+=1){var o={num:n+1};n+1>=f?m>=6?(o.day=e[m].day,m=0):(o.day=e[m].day,m+=1):k[n]&&(o.day=k[n]),l.push(o)}return l},z="\n                .day-item {\n                  flex-basis: 14.28%;\n                }\n                .day-item:hover {\n                  background: #852b3a !important;\n                  color: white !important;\n                }\n                .active-day {\n                  background: #852b3a !important;\n                  color: white !important;\n                }\n                .disable-day {\n                  background: #bf858e !important\n                  color: white !important;\n                }\n                .today-day {\n                  background: #bd8a8a !important;\n                }\n              \n",A=function(a){var b=function(a,b){var c=new Date(Date.parse("".concat(a," 1,").concat(b))).getMonth()+1;return new Date(b,c,0).getDate()},c=(0,h.useState)(w),d=c[0];c[1];var e=(0,h.useState)(new Date().getDate()),f=e[0];e[1];var i=(0,h.useState)(Math.abs(7-(new Date().getDay()+2))),j=i[0];i[1];var k=(0,h.useState)(new Date().getMonth()+1),l=k[0];k[1];var m=(0,h.useState)(new Date().getFullYear()),n=m[0];m[1];var o=(0,h.useState)(7-j);o[0],o[1];var p=(0,h.useState)(f),q=p[0],r=p[1],s=y(l,b,n,j,d,f),t=(0,h.useState)(s),u=t[0];t[1];var A=function(a){},B=function(b,c,d,e){b.preventDefault(),r(c),a.onDateChange?a.onDateChange(b,{date:c,month:d,year:e}):console.log("No date change event listener")};return(0,g.jsxs)("div",{className:"Calendar",children:[(0,g.jsxs)("div",{className:"controller d-flex mb-2",children:[(0,g.jsx)("button",{className:"previous btn btn-primary",type:"button",children:"Previous"}),(0,g.jsx)("button",{className:"previous btn btn-primary",type:"button",children:"Next"})]}),(0,g.jsx)("div",{className:"week-calender",children:function(){for(var a=function(a){if(u[a]){var c;b.push((0,g.jsxs)("li",{style:{flexBasis:"14.28%"},role:"button",onKeyUp:A,onClick:function(b){return B(b,u[a].num,l,n)},className:"jsx-".concat(z.__hash)+" "+(((c=a+1)===q?"bg-secondary text-primary py-3 day-item text-center rounded-1 vertical-center active-day":c===f?"bg-secondary text-primary py-3 day-item text-center rounded-1 vertical-center today-day":"bg-secondary text-primary py-3 day-item text-center rounded-1 vertical-center")||""),children:[(0,g.jsx)("span",{className:"jsx-".concat(z.__hash),children:u[a].num}),(0,g.jsx)("span",{className:"jsx-".concat(z.__hash)+" text-capitalize",children:x.find(function(a){return a.id===l}).short}),(0,g.jsx)(v(),{id:z.__hash,children:z})]},a))}},b=[],c=f-1;c<f-1+7;c+=1)a(c);return(0,g.jsx)("ul",{className:"d-flex justify-content-between flex-wrap align-items-center list-unstyled weeks w-full",children:b})}()})]})},B=s.V5.ANY,C=s.V5.ONLINE,D=s.V5.TL,E=s.V5.SL,F=function(){var a=(0,o.Ji)({googleMapsApiKey:s.Ej,libraries:s.S_}).isLoaded,b=(0,h.useState)(null),c=b[0],e=b[1],i=(0,h.useState)(null),u=i[0],v=i[1],w=(0,h.useState)(null),x=w[0],y=w[1],z=(0,k.I0)(),F=(0,k.v9)(function(a){return a.scheduledclass.selectedSearchUser}),G=(0,k.v9)(function(a){return a.user.currentUser}),H=(0,k.v9)(function(a){return a.scheduledclass.initializeSchedule}),I=(0,k.v9)(function(a){return a.scheduledclass.slotList});(0,h.useEffect)(function(){if(G.id){if(H.tutionplace===C||H.tutionplace===B)z((0,p.Qg)({tuitionlocation:C}));else if(H.tutionplace===D)z((0,p.Qg)({tuitionlocation:F.presentaddress}));else if(H.tutionplace===E){var a=G.presentaddress;a.includes("(")&&(a=a.split("(")[0]),z((0,p.Qg)({tuitionlocation:a}))}}},[G]);var J,K=function(a){a.preventDefault(),z((0,p.c9)(!1))},L=function(a){a.preventDefault(),z((0,p.Qg)((0,m.Z)({},a.target.name,a.target.value)))},M=(J=(0,d.Z)(f().mark(function a(b){var c,d,e,g,h,i,k;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.preventDefault(),H.time){a.next=3;break}return a.abrupt("return",z((0,q.ri)(["You must select a slot"])));case 3:if(H.tutionplace){a.next=5;break}return a.abrupt("return",z((0,q.ri)(["You must select a tution place"])));case 5:if(c=new Date([H.date,H.time,]),H.receverId){a.next=8;break}return a.abrupt("return",z((0,q.ri)(["You must have a recever"])));case 8:if(H.ClassTypeId){a.next=10;break}return a.abrupt("return",z((0,q.ri)(["You must have a class type"])));case 10:if(H.SubjectId){a.next=12;break}return a.abrupt("return",z((0,q.ri)(["You must have a subject"])));case 12:return delete(d=(0,n.Z)({},H)).date,delete d.time,d.start=c.toISOString(),a.prev=16,z((0,q.o4)(!0)),a.next=20,r.Z.post("/scheduledclass/initiate",d);case 20:201===(e=a.sent).status&&(window.localStorage.removeItem("search"),j().push("/user/dashboard")),a.next=30;break;case 24:a.prev=24,a.t0=a.catch(16),console.log(a.t0),(null===a.t0|| void 0===a.t0?void 0:null===(g=a.t0.response)|| void 0===g?void 0:null===(h=g.data)|| void 0===h?void 0:h.msg)&&z((0,q.ri)([a.t0.response.data.msg])),((null===a.t0|| void 0===a.t0?void 0:null===(i=a.t0.response)|| void 0===i?void 0:i.status)===401||(null===a.t0|| void 0===a.t0?void 0:null===(k=a.t0.response)|| void 0===k?void 0:k.status)===405)&&(window.localStorage.removeItem("user"),z((0,l.uJ)()),j().push("/user/login"));case 30:return a.prev=30,z((0,q.o4)(!1)),a.finish(30);case 33:case"end":return a.stop()}},a,null,[[16,24,30,33]])})),function(a){return J.apply(this,arguments)}),N=function(a,b){a.preventDefault(),z((0,p.Qg)({date:"".concat(b.year,"-").concat(b.month,"-").concat(b.date)}))},O=function(a,b,c){a.preventDefault(),e(b),v(c),"PM"===c?z((0,p.Qg)({time:"".concat(b+12,":00")})):z((0,p.Qg)({time:"".concat(b,":00")}))};if(!a)return(0,g.jsx)(t.Z,{});var P=function(a){y(a)},Q=function(){try{var a=x.getPlace().geometry.location.lat(),b=x.getPlace().geometry.location.lng(),c="".concat(x.getPlace().name,", ").concat(x.getPlace().formatted_address,", (").concat(b,", ").concat(a,")");z((0,p.Qg)({tuitionlocation:c}))}catch(d){console.log(d)}},R=function(a,b,d,e){for(var f=function(a){var d=(0,g.jsxs)("button",{type:"button",onClick:function(c){return O(c,b[a].slot,b[a].ampm)},className:b[a].slot===c&&b[a].ampm===u?"btn mb-2 btn-primary":"btn mb-2 btn-outline-primary",children:["".concat(b[a].slotName," ").concat(b[a].ampm)," "]},b[a].id);h.push(d)},h=[],i=a;i<d;i+=1)f(i);return(0,g.jsx)("div",{className:"time-slot d-flex w-full justify-content-md-between align-items-center flex-wrap ".concat(e),children:h})};return(0,g.jsxs)("div",{className:"SendRequest",children:[(0,g.jsx)("div",{className:"row mx-0 mb-3",children:(0,g.jsx)("h1",{className:"h1",children:"Send Request"})}),(0,g.jsxs)("form",{onSubmit:M,children:[(0,g.jsxs)("div",{className:"row mb-3 mx-0",children:[(0,g.jsx)("div",{className:"my-2 week-calendar col-md-12",children:(0,g.jsx)(A,{onDateChange:N})}),(0,g.jsxs)("div",{className:"col-md-12 d-flex justify-content-between flex-md-column",children:[R(0,I,I.length/2,""),R(I.length/2,I,I.length,"justify-content-end")]})]}),(0,g.jsx)("div",{className:"row mb-3 mx-0",children:(0,g.jsxs)("div",{className:"col-md-12",children:[(0,g.jsx)("label",{htmlFor:"tuitionlocation",children:"Address"}),(0,g.jsx)(o.F2,{onLoad:P,onPlaceChanged:Q,className:"form-control p-0",children:(0,g.jsx)("input",{name:"tuitionlocation",id:"tuitionlocation",className:"form-control",defaultValue:null==H?void 0:H.tuitionlocation,onChange:L})})]})}),(0,g.jsx)("div",{className:"row mb-3 mx-0",children:(0,g.jsxs)("div",{className:"col-md-12",children:[(0,g.jsx)("label",{htmlFor:"desc",children:"Description"}),(0,g.jsx)("textarea",{name:"desc",id:"desc",className:"form-control",rows:"2",defaultValue:H.desc,onChange:L})]})}),(0,g.jsx)("div",{className:"row mb-3 mx-0",children:(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("h3",{htmlFor:"rate",children:["Hourly Rate ",null==F?void 0:F.rate]})})}),(0,g.jsx)("hr",{}),(0,g.jsx)("div",{className:"row mb-3 mx-0"}),(0,g.jsx)("div",{className:"row mb-3 mx-0",children:(0,g.jsxs)("div",{className:"col-md-12",children:[(0,g.jsx)("button",{type:"submit",className:"btn btn-primary w-fit",children:"Submit Request"}),(0,g.jsx)("button",{type:"button",className:"btn btn-danger w-fit",onClick:K,children:"Cancel"})]})})]})]})},G=c(1964),H=c(2319),I=s.uJ.STUDENT,J=s.uJ.TEACHER,K=function(){var a=!0,b=(0,k.I0)(),c=(0,i.useRouter)(),e=(0,h.useState)(),j=(e[0],e[1]);(0,k.v9)(function(a){return a.elements.isLoading});var m=(0,k.v9)(function(a){return a.user.authUserInfo}),n=(0,k.v9)(function(a){return a.user.selectedUser}),o=(0,k.v9)(function(a){return a.scheduledclass.initializeSchedule}),r=function(a){if(m.role===J)c.push("/user/dashboard");else if(null===o.SubjectId||null===o.ClassTypeId){var d=window.localStorage.getItem("search");if(d){var e=JSON.parse(d);b((0,p.Qg)({receverId:parseInt(a,10),SubjectId:parseInt(e.SubjectId,10),ClassTypeId:parseInt(e.ClassTypeId,10),tutionplace:e.tutionplace}))}else c.push("/search")}};return(0,h.useEffect)(function(){var e=new URLSearchParams(window.location.search).get("userId");j(e),e&&a&&(b((0,q.hb)()),(null==m?void 0:m.role)!==I&&c.push("/user/login"),(0,d.Z)(f().mark(function a(){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all([b((0,l.Ne)(e)),b((0,l.n_)(m.id)),r(e)]);case 2:case"end":return a.stop()}},a)}))(),a=!1)},[c.isReady]),(0,h.useEffect)(function(){n.role!==J&&c.push("/search")},[n]),(0,g.jsx)(G.Z,{children:(0,g.jsxs)("div",{className:"container request",children:[(0,g.jsx)(H.Z,{}),(0,g.jsx)(F,{})]})})}}},function(a){a.O(0,[255,997,206,774,888,179],function(){var b;return a(a.s=2356)}),_N_E=a.O()}])