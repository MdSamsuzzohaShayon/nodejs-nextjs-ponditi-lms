(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[519],{6404:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/passwordrecover",function(){return c(1417)}])},2319:function(a,b,c){"use strict";var d=c(5893),e=c(9473);b.Z=function(){var a=(0,e.v9)(function(a){return a.elements.errorList}),b=(0,e.v9)(function(a){return a.elements.successMessageList});return a.length>0?(0,d.jsx)("div",{className:"alert alert-danger",children:(0,d.jsx)("ul",{children:a.map(function(a,b){return(0,d.jsxs)("li",{className:"list-unstyled",children:[(0,d.jsx)("img",{src:"/icons/exclamination.svg",alt:"",width:"25px"})," ",a]},b)})})}):b.length>0?(0,d.jsx)("div",{className:"alert alert-success",children:(0,d.jsx)("ul",{children:b.map(function(a,b){return(0,d.jsxs)("li",{className:"list-unstyled",children:[(0,d.jsx)("img",{src:"/icons/tick.svg",alt:"",width:"25px"})," ",a]},b)})})}):null}},1417:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return v}});var d=c(4924),e=c(5893),f=c(9473),g=c(1664),h=c.n(g),i=c(1964);c(5789);var j=c(2319),k=c(7568),l=c(4051),m=c.n(l),n=c(4884),o=c(8525),p=c(7916),q=function(a){var b,c=(0,f.I0)(),d=(b=(0,k.Z)(m().mark(function b(d){var e,f,g,h;return m().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return d.preventDefault(),c((0,o.hb)()),""===a.resetPassReq.phoneoremail&&c((0,o.ri)(["both field must be filled"])),e={},a.resetPassReq.phoneoremail.toString().includes("@")?e.email=a.resetPassReq.phoneoremail:e.phone=a.resetPassReq.phoneoremail,b.prev=5,c((0,o.o4)(!0)),b.next=9,p.Z.post("/user/forgetpassword",e,{headers:{"Content-Type":"application/json"}});case 9:201===(f=b.sent).status&&(c((0,o.hb)()),a.toNextStep()),b.next=18;break;case 13:b.prev=13,b.t0=b.catch(5),console.log(b.t0),(null===b.t0|| void 0===b.t0?void 0:null===(g=b.t0.response)|| void 0===g?void 0:null===(h=g.data)|| void 0===h?void 0:h.msg)&&c((0,o.ri)([b.t0.response.data.msg]));case 18:return b.prev=18,c((0,o.o4)(!1)),b.finish(18);case 21:case"end":return b.stop()}},b,null,[[5,13,18,21]])})),function(a){return b.apply(this,arguments)});return(0,e.jsx)("div",{children:(0,e.jsxs)("form",{onSubmit:d,children:[(0,e.jsx)("div",{className:"row mb-3",children:(0,e.jsxs)("div",{className:"col-md-12",children:[(0,e.jsx)("label",{htmlFor:"phoneoremail",children:"Phone or Email (an OTP will be sent to your phone)"}),(0,e.jsx)("input",{type:"text",className:"form-control",name:"phoneoremail",defaultValue:a.resetPassReq.phoneoremail,onChange:a.inputChangeHandler})]})}),(0,e.jsx)("div",{className:"row mb-3",children:(0,e.jsx)("div",{className:"col",children:(0,e.jsx)("button",{type:"submit",className:"btn btn-primary w-fit",children:"Submit"})})})]})})},r=c(7294),s=c(1163),t=c.n(s),u=function(a){var b,c,d,g,h,i,j,l,q=(0,f.I0)(),s=!0,u=(0,r.useState)(!0),v=u[0],w=u[1],x=(b=(0,k.Z)(m().mark(function b(c){var d,e,f,g;return m().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(c.preventDefault(),w(!1),!1!==s){b.next=4;break}return b.abrupt("return",null);case 4:return q((0,o.hb)()),""===a.resetPassReq.phoneoremail&&q((0,o.ri)(["both field must be filled"])),d={},a.resetPassReq.phoneoremail.toString().includes("@")?d.email=a.resetPassReq.phoneoremail:d.phone=a.resetPassReq.phoneoremail,d.otp=a.resetPassReq.otp,d.password=a.resetPassReq.password,b.prev=10,q((0,o.o4)(!0)),b.next=14,p.Z.put("/user/resetpassword",d,{headers:{"Content-Type":"application/json"}});case 14:(200===(e=b.sent).status||201===e.status)&&(q((0,n.t1)()),q((0,o.hb)()),q((0,o.o4)(!1)),t().push("/user/login")),b.next=23;break;case 18:b.prev=18,b.t0=b.catch(10),console.log(b.t0),(null===b.t0|| void 0===b.t0?void 0:null===(f=b.t0.response)|| void 0===f?void 0:null===(g=f.data)|| void 0===g?void 0:g.msg)&&q((0,o.ri)([b.t0.response.data.msg]));case 23:return b.prev=23,q((0,o.o4)(!1)),b.finish(23);case 26:return b.abrupt("return",null);case 27:case"end":return b.stop()}},b,null,[[10,18,23,26]])})),function(a){return b.apply(this,arguments)});return(0,e.jsx)("div",{className:"VerifyPassOtp",children:(0,e.jsxs)("form",{onSubmit:x,noValidate:v,children:[(0,e.jsx)("div",{className:"row mb-3",children:(0,e.jsxs)("div",{className:"col-md-12",children:[(0,e.jsx)("label",{htmlFor:"otp",children:"OTP code"}),(0,e.jsx)("input",{type:"number",className:"form-control",name:"otp",defaultValue:a.resetPassReq.otp,onChange:a.inputChangeHandler}),(c=a.resetPassReq.otp,d="fs-6 fw-light text-danger",6!==c.length?(s=!1,(0,e.jsx)("p",{className:!1===v?d:"".concat(d," text-danger d-none"),children:"OTP must be 6 charecter long"})):null)]})}),(0,e.jsxs)("div",{className:"row mb-3",children:[(0,e.jsxs)("div",{className:"col-md-6",children:[(0,e.jsx)("label",{htmlFor:"password",children:"New Password"}),(0,e.jsx)("input",{type:"password",className:"form-control",name:"password",defaultValue:a.resetPassReq.password,onChange:a.inputChangeHandler}),(g=a.resetPassReq.password,h="fs-6 fw-light text-danger",g.length<6?(s=!1,(0,e.jsx)("p",{className:!1===v?h:"".concat(h," d-none"),children:"Password must be more than or equal 6 charecter."})):null)]}),(0,e.jsxs)("div",{className:"col-md-6",children:[(0,e.jsx)("label",{htmlFor:"password2",children:"Confirm New Password"}),(0,e.jsx)("input",{type:"password",className:"form-control",name:"password2",defaultValue:a.resetPassReq.password2,onChange:a.inputChangeHandler}),(i=a.resetPassReq.password,j=a.resetPassReq.password2,l="fs-6 fw-light text-danger",j.length<6?(s=!1,(0,e.jsx)("p",{className:!1===v?l:"".concat(l," d-none"),children:"Password must be more than or equal 6 charecter."})):i!==j?(s=!1,(0,e.jsx)("p",{className:!1===v?l:"".concat(l," d-none"),children:"Password did not match."})):null)]})]}),(0,e.jsx)("div",{className:"row mb-3",children:(0,e.jsx)("div",{className:"col",children:(0,e.jsx)("button",{type:"submit",className:"btn btn-primary w-fit",children:"Submit"})})})]})})},v=function(){var a=(0,f.I0)();(0,f.v9)(function(a){return a.elements.isLoading});var b=(0,f.v9)(function(a){return a.user.resetPassStep}),c=(0,f.v9)(function(a){return a.user.resetPassReq}),g=function(b){a((0,n._t)((0,d.Z)({},b.target.name,b.target.value)))},k=function(){a((0,n.T7)(b+1))};return(0,e.jsx)(i.Z,{children:(0,e.jsx)("section",{className:"Login d-flex p-0 m-0",children:(0,e.jsxs)("div",{className:"container",children:[(0,e.jsx)("h1",{className:"PasswordRecover mt-5",children:"Password Recover"}),(0,e.jsx)(j.Z,{}),function(){switch(b){case 1:default:return(0,e.jsx)(q,{resetPassReq:c,toNextStep:k,inputChangeHandler:g});case 2:return(0,e.jsx)(u,{resetPassReq:c,toNextStep:k,inputChangeHandler:g})}}(),(0,e.jsx)("div",{className:"row mb-3",children:(0,e.jsxs)("div",{className:"col d-flex flex-column",children:[(0,e.jsx)(h(),{href:"/user/passwordrecover",children:(0,e.jsx)("a",{className:"text-decoration-underline text-capitalize text-dark",children:"Login"})}),(0,e.jsx)(h(),{href:"/user/register",children:(0,e.jsx)("a",{className:"text-decoration-underline text-capitalize text-dark",children:"Don't have an account?"})})]})})]})})})}}},function(a){a.O(0,[664,206,774,888,179],function(){var b;return a(a.s=6404)}),_N_E=a.O()}])